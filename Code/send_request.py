import requests
import json
import time

# The server's IP address and port
SERVER_URL = "http://XXX.XXX.XXX.XXX:5000/get_action"

def run_test_scenario(name, lidar_data, action_history):
    """
    A helper function to run a single test scenario.
    """
    payload = {
        "lidar_data": lidar_data,
        "action_history": action_history}

    # --- Send the Data and Get the Response ---
    # print(f"--- {name} ---")
    # print("--- DATA TO BE SENT ---")
    # print(json.dumps(payload, indent=2))
    # print("-" * 25)

    try:
        print(f"\nSending request to server at {SERVER_URL}...")
        response = requests.post(SERVER_URL, json=payload, timeout=120)
        response.raise_for_status()
        action_plan = response.json()
        print("\n--- ACTION PLAN RECEIVED ---")
        print(json.dumps(action_plan, indent=2))
        print("-" * 25)
        return action_plan
    except requests.exceptions.RequestException as e:
        print(f"\nERROR: Could not connect to the server.\n{e}")
        return None

if __name__ == "__main__":
    # --- SCENARIO 1: ---
    s1_ranges = [2.201939582824707, 2.1689181327819824, 2.1605384349823, 2.1506378650665283, 2.1765124797821045, 2.1577208042144775, 2.172919511795044, 2.1765990257263184, 2.1914892196655273, 2.177422523498535, 2.1733968257904053, 2.1986565589904785, 2.1942899227142334, 2.192150115966797, 2.22263503074646, 2.2095327377319336, 2.216585874557495, 2.239309787750244, 2.243114948272705, 2.2312865257263184, 2.255673408508301, 2.2549335956573486, 2.29565167427063, 2.3042140007019043, 2.321221113204956, 2.327265739440918, 2.3345515727996826, 2.351104974746704, 2.39418625831604, 2.3775136470794678, 2.4230916500091553, 2.436250686645508, 2.444247007369995, 2.49233078956604, 2.5062978267669678, 2.514514684677124, 2.5461015701293945, 2.588808536529541, 2.6122608184814453, 2.6186697483062744, 2.669102668762207, 2.703483819961548, 2.7527031898498535, 2.686314582824707, 2.659632921218872, 2.5726847648620605, 2.5361645221710205, 2.4840850830078125, 2.434060573577881, 2.411163330078125, 2.3708767890930176, 2.295828104019165, 2.282524347305298, 2.232789993286133, 2.219350576400757, 2.1964337825775146, 2.146141529083252, 2.132443428039551, 2.0988423824310303, 2.058298349380493, 2.041302442550659, 2.018829107284546, 2.0032708644866943, 1.9801807403564453, 1.9589664936065674, 1.9252758026123047, 1.922959327697754, 1.893046498298645, 1.8841265439987183, 1.8767098188400269, 1.8431847095489502, 1.8530073165893555, 1.8112246990203857, 1.8052631616592407, 1.805069923400879, 1.8092622756958008, 1.7673704624176025, 1.7627289295196533, 1.7449451684951782, 1.755484938621521, 1.7327288389205933, 1.737869143486023, 1.7168711423873901, 1.7195720672607422, 1.7065081596374512, 1.705422282218933, 1.690215826034546, 1.6903975009918213, 1.6821702718734741, 1.669963002204895, 1.6682889461517334, 1.6989105939865112, 1.6606234312057495, 1.6771247386932373, 1.6657733917236328, 1.6777421236038208, 1.6777857542037964, 1.6595479249954224, 1.6761939525604248, 1.6442312002182007, 1.6733946800231934, 1.6773592233657837, 1.6682456731796265, 1.66637122631073, 1.6888070106506348, 1.6747207641601562, 1.6915749311447144, 1.701418161392212, 1.6983510255813599, 1.6957533359527588, 1.707281231880188, 1.7120471000671387, 1.728218674659729, 1.7161813974380493, 1.7128986120224, 1.7368144989013672, 1.7642894983291626, 1.7807073593139648, 1.792554259300232, 1.7975822687149048, 1.7887920141220093, 1.7969169616699219, 1.8148359060287476, 1.84787118434906, 1.852082371711731, 1.8551884889602661, 1.8781085014343262, 1.8979997634887695, 1.9265464544296265, 1.92909836769104, 1.9431248903274536, 1.9884231090545654, 2.0123558044433594, 2.0088951587677, 2.033144235610962, 2.0543150901794434, 2.080716848373413, 2.1178293228149414, 2.1553308963775635, 2.173301935195923, 2.204266309738159, 2.239769697189331, 2.2774524688720703, 2.3158349990844727, 2.356900215148926, 2.3957018852233887, 2.4225406646728516, 2.47833251953125, 2.5167763233184814, 2.5739564895629883, 2.632641077041626, 2.684913158416748, 2.729719638824463, 2.791069507598877, 2.8681981563568115, 2.948601245880127, 3.0174872875213623, 3.0012545585632324, 2.987943172454834, 2.957946300506592, 2.9041011333465576, 2.883970260620117, 2.8617336750030518, 2.8240013122558594, 2.8353304862976074, 2.7820723056793213, 2.7771780490875244, 2.757448434829712, 2.7238659858703613, 2.716278314590454, 2.6939351558685303, 2.6707968711853027, 2.6575303077697754, 2.64410138130188, 2.6413328647613525, 2.611961841583252, 2.6162402629852295, 2.6026382446289062, 2.589876651763916, 2.568464517593384, 2.562372922897339, 2.5604052543640137, 2.550150156021118, 2.570695400238037, 2.6706531047821045, 3.08953595161438, 3.6750125885009766, 4.572365760803223, 6.066334247589111, 8.901922225952148, 10.387136459350586, 10.365800857543945, 10.37589168548584, 10.394104957580566, 10.409891128540039, 10.415709495544434, 10.414619445800781, 7.929957866668701, 7.809027194976807, 7.704452991485596, 5.297130584716797, 5.254854202270508, 0.14643365144729614, 0.11758225411176682, 0.12868300080299377, 0.10000000149011612, 0.11781085282564163, 0.10771992802619934, 0.1257055252790451, 6.513363361358643, 6.7356791496276855, 6.817610740661621, 6.758886814117432, 6.713901996612549, 3.180617094039917, 3.0523974895477295, 2.9276838302612305, 2.818220376968384, 2.8010008335113525, 2.8392019271850586, 2.858609437942505, 2.88098406791687, 2.8988571166992188, 2.9445807933807373, 2.939530849456787, 2.8536369800567627, 2.7752766609191895, 2.7288169860839844, 2.662105083465576, 2.5903470516204834, 2.538576602935791, 2.4842050075531006, 2.42659592628479, 2.3744444847106934, 2.347755193710327, 2.302476406097412, 2.246151924133301, 2.2200541496276855, 2.196413040161133, 2.121110439300537, 2.115081548690796, 2.0799660682678223, 2.059009313583374, 2.014887809753418, 1.9868426322937012, 1.9550141096115112, 1.9352761507034302, 1.9053797721862793, 1.889832615852356, 1.8660781383514404, 1.8408253192901611, 1.8252454996109009, 1.798550009727478, 1.776573896408081, 1.766817331314087, 1.7453274726867676, 1.7451145648956299, 1.7188715934753418, 1.7088879346847534, 1.6875523328781128, 1.6855915784835815, 1.6864248514175415, 1.6605513095855713, 1.276170015335083, 1.2823560237884521, 1.2774864435195923, 1.2692373991012573, 1.2677439451217651, 1.2505990266799927, 1.2467944622039795, 1.2471383810043335, 1.2377370595932007, 1.2254303693771362, 1.2169063091278076, 1.2270283699035645, 1.2193673849105835, 1.2318971157073975, 1.2134984731674194, 1.211166501045227, 1.202417254447937, 1.2304625511169434, 1.1973222494125366, 1.2046388387680054, 1.2040176391601562, 1.2053837776184082, 1.2063069343566895, 1.2090142965316772, 1.5247265100479126, 1.530798077583313, 1.5273367166519165, 1.5256634950637817, 1.5357822179794312, 1.5439047813415527, 1.5514370203018188, 1.5635647773742676, 1.5479846000671387, 1.5813182592391968, 1.564195156097412, 1.573228359222412, 1.5680899620056152, 1.5823631286621094, 1.5753587484359741, 1.586726188659668, 1.608553171157837, 1.6238354444503784, 1.6238470077514648, 1.6340783834457397, 1.6433640718460083, 1.6254490613937378, 1.6697405576705933, 1.6922787427902222, 1.6895332336425781, 1.6967564821243286, 1.721127986907959, 1.7512544393539429, 1.7678080797195435, 1.761937141418457, 1.7905731201171875, 1.7972913980484009, 1.825406789779663, 1.8453136682510376, 1.87102472782135, 1.8902981281280518, 1.9089101552963257, 1.9325714111328125, 1.9587547779083252, 1.9893978834152222, 2.0145857334136963, 2.0431599617004395, 2.0643415451049805, 2.0876526832580566, 2.1351795196533203, 2.162764310836792, 2.1981406211853027, 2.2527084350585938, 2.287916660308838, 2.3176519870758057, 2.3703701496124268, 2.409105062484741, 2.459106206893921, 2.52003812789917, 2.569967031478882, 2.629859685897827, 2.6342954635620117, 2.608488082885742, 2.605576992034912, 2.543396472930908, 2.530412197113037, 2.5143325328826904, 2.4949071407318115, 2.4777603149414062, 2.4420254230499268, 2.4340591430664062, 2.3903536796569824, 2.37884783744812, 2.385474681854248, 2.3535192012786865, 2.3220973014831543, 2.3179771900177, 2.313095808029175]
    s1_lidar_data = {
        "header": {"seq": 1, "stamp": {"secs": 100, "nsecs": 0}, "frame_id": "laser"},
        "angle_min": -3.0, "angle_max": 3.0, "angle_increment": 0.0167, "time_increment": 0.0,
        "scan_time": 0.0, "range_min": 0.1, "range_max": 30.0, "ranges": s1_ranges,
        "intensities": [0.0] * len(s1_ranges)}
    s1_history = []
    plan1 = run_test_scenario("SCENARIO 1:", s1_lidar_data, s1_history)

    # Pause between scenarios
    time.sleep(2)

    # --- SCENARIO 2: ---
    s2_ranges = [2.197392463684082, 2.1903159618377686, 2.2106893062591553, 2.224158525466919, 2.2130556106567383, 2.2227649688720703, 2.2583155632019043, 2.2482240200042725, 2.236834764480591, 2.2738728523254395, 2.2752227783203125, 2.3050408363342285, 2.3080594539642334, 2.3090388774871826, 2.321835517883301, 2.353041172027588, 2.3587141036987305, 2.3811588287353516, 2.389763355255127, 2.410618782043457, 2.42889142036438, 2.4683475494384766, 2.4783084392547607, 2.5101375579833984, 2.5421276092529297, 2.5479612350463867, 2.5930683612823486, 2.628410816192627, 2.6424057483673096, 2.683330774307251, 2.711825132369995, 2.723100185394287, 2.66430401802063, 2.6266627311706543, 2.5656275749206543, 2.5183422565460205, 2.4721224308013916, 2.4434471130371094, 2.3893978595733643, 2.3511199951171875, 2.3138487339019775, 2.2912237644195557, 2.2562367916107178, 2.2278521060943604, 2.1855578422546387, 2.145312786102295, 2.130584716796875, 2.0933918952941895, 2.0505266189575195, 2.0314102172851562, 2.040466070175171, 1.9944027662277222, 2.000199556350708, 1.9753360748291016, 1.930724859237671, 1.9253064393997192, 1.9058146476745605, 1.9064290523529053, 1.8672069311141968, 1.8702898025512695, 1.828335165977478, 1.828588604927063, 1.8167675733566284, 1.7930030822753906, 1.798529863357544, 1.7844371795654297, 1.7659379243850708, 1.7692444324493408, 1.752049207687378, 1.746916651725769, 1.743215799331665, 1.7366122007369995, 1.7078661918640137, 1.7186026573181152, 1.698718547821045, 1.6896439790725708, 1.7175750732421875, 1.6906116008758545, 1.7022846937179565, 1.6930817365646362, 1.677664875984192, 1.6900185346603394, 1.67978835105896, 1.68867826461792, 1.6890661716461182, 1.683310866355896, 1.6990278959274292, 1.684943437576294, 1.6908411979675293, 1.688633918762207, 1.6841990947723389, 1.684291958808899, 1.6948477029800415, 1.7133787870407104, 1.6970396041870117, 1.7223408222198486, 1.7038249969482422, 1.7085810899734497, 1.7269327640533447, 1.7025675773620605, 1.7442082166671753, 1.747251272201538, 1.7620230913162231, 1.761520266532898, 1.7647244930267334, 1.7839304208755493, 1.7700749635696411, 1.797710657119751, 1.8194260597229004, 1.8210649490356445, 1.8486803770065308, 1.85763680934906, 1.8666366338729858, 1.8771896362304688, 1.8923335075378418, 1.9080296754837036, 1.9325865507125854, 1.9514436721801758, 1.9677602052688599, 1.9894760847091675, 2.003340721130371, 2.0437169075012207, 2.0424089431762695, 2.103705406188965, 2.0889272689819336, 2.1433820724487305, 2.1347920894622803, 2.1882262229919434, 2.2245402336120605, 2.263838291168213, 2.2732951641082764, 2.3404645919799805, 2.350400686264038, 2.417703151702881, 2.4519784450531006, 2.4771416187286377, 2.5345940589904785, 2.5833919048309326, 2.637681484222412, 2.6894474029541016, 1.1654741764068604, 1.1976041793823242, 1.1907504796981812, 1.1538876295089722, 1.1502954959869385, 1.131150722503662, 1.1187784671783447, 1.1014844179153442, 1.0845264196395874, 1.0924022197723389, 1.0906697511672974, 1.0588856935501099, 1.0535063743591309, 1.039530634880066, 1.041449785232544, 1.0174423456192017, 1.0320534706115723, 1.025633692741394, 1.024998426437378, 1.0040985345840454, 1.0056517124176025, 0.9951640367507935, 0.9957169890403748, 0.9851278066635132, 0.9764973521232605, 0.9945951700210571, 0.9649609327316284, 0.9784501194953918, 0.9742151498794556, 0.9608262777328491, 0.9565708637237549, 0.9452461004257202, 0.9814480543136597, 0.9617592096328735, 0.9556102752685547, 0.9666166305541992, 0.947452187538147, 0.9557157158851624, 0.9608668684959412, 0.9229974150657654, 0.9640212059020996, 0.9526964426040649, 0.9383202195167542, 0.9518643617630005, 0.9600180387496948, 0.9447681903839111, 0.9584957361221313, 0.9408305287361145, 0.9456501007080078, 0.9590394496917725, 0.9696319103240967, 0.9581812620162964, 0.9668596982955933, 0.974201500415802, 0.9737563729286194, 0.9868329167366028, 0.9921811819076538, 0.972061812877655, 0.9786730408668518, 0.9935418963432312, 1.0097241401672363, 1.034348726272583, 1.0188432931900024, 1.0352163314819336, 1.020255208015442, 1.0420374870300293, 1.0478428602218628, 1.0571038722991943, 1.083016276359558, 1.0714545249938965, 1.0821505784988403, 1.1008081436157227, 1.1047996282577515, 1.1033947467803955, 1.1389946937561035, 1.1466760635375977, 1.1462445259094238, 1.18022620677948, 1.1811553239822388, 1.198183298110962, 1.2147175073623657, 1.2314696311950684, 1.2507531642913818, 1.2766562700271606, 1.2801729440689087, 1.3099530935287476, 1.3251316547393799, 1.3530794382095337, 1.3872506618499756, 1.4067035913467407, 1.4232902526855469, 1.4443917274475098, 1.4667283296585083, 1.492950439453125, 1.5446239709854126, 1.8907294273376465, 1.8592873811721802, 1.8467177152633667, 1.8266167640686035, 1.8133183717727661, 1.7821564674377441, 1.7687029838562012, 1.7495765686035156, 1.738585114479065, 1.727304458618164, 1.705942153930664, 1.6863218545913696, 1.6866612434387207, 1.6694809198379517, 1.6635100841522217, 1.635514497756958, 1.28315007686615, 1.2793469429016113, 1.2755323648452759, 1.2668932676315308, 1.2397146224975586, 1.2382217645645142, 1.242430329322815, 1.2270429134368896, 1.2461626529693604, 1.2281428575515747, 1.2106459140777588, 1.2288988828659058, 1.2114042043685913, 1.2033425569534302, 1.1965240240097046, 1.1793142557144165, 1.1971701383590698, 1.179308533668518, 1.1989551782608032, 1.1973994970321655, 1.175077199935913, 1.1774988174438477, 1.1785413026809692, 1.1940743923187256, 1.5182256698608398, 1.5344387292861938, 1.5193079710006714, 1.5106964111328125, 1.519981026649475, 1.5407851934432983, 1.5195757150650024, 1.5283513069152832, 1.5481992959976196, 1.5354961156845093, 1.5291318893432617, 1.5438079833984375, 1.5497828722000122, 1.5761010646820068, 1.5610967874526978, 1.5717767477035522, 1.5817886590957642, 1.5904630422592163, 1.6084661483764648, 1.6110379695892334, 1.6300814151763916, 1.6514836549758911, 1.6517695188522339, 1.6629291772842407, 1.6697032451629639, 1.6728711128234863, 1.687459945678711, 1.7227956056594849, 1.7312008142471313, 1.7484358549118042, 1.7535851001739502, 1.7751494646072388, 1.7965704202651978, 1.8003358840942383, 1.8380558490753174, 1.8530569076538086, 1.8808598518371582, 1.8965996503829956, 1.9237337112426758, 1.9610590934753418, 1.9666520357131958, 2.0097081661224365, 2.0424699783325195, 2.050933361053467, 2.0971360206604004, 2.1259446144104004, 2.160679578781128, 2.226677894592285, 2.246079206466675, 2.274419069290161, 2.316830635070801, 2.365668535232544, 2.4388208389282227, 2.497199296951294, 2.5357186794281006, 2.579245090484619, 2.6417486667633057, 2.614821672439575, 2.5744102001190186, 2.565505027770996, 2.5238161087036133, 2.5048635005950928, 2.4927220344543457, 2.4714243412017822, 2.4227442741394043, 2.4050636291503906, 2.3880186080932617, 2.4014463424682617, 2.3605282306671143, 2.3489465713500977, 2.326913356781006, 2.312990188598633, 2.3164725303649902, 2.2805073261260986, 2.267165184020996, 2.2591793537139893, 2.2531986236572266, 2.2353012561798096, 2.2247655391693115, 2.204195022583008, 2.2236554622650146, 2.2101285457611084, 2.200869083404541, 2.1892263889312744, 2.19014310836792]
    s2_lidar_data = {
        "header": {"seq": 2, "stamp": {"secs": 105, "nsecs": 0}, "frame_id": "laser"},
        "angle_min": -3.0, "angle_max": 3.0, "angle_increment": 0.0167, "time_increment": 0.0,
        "scan_time": 0.0, "range_min": 0.1, "range_max": 30.0, "ranges": s2_ranges,
        "intensities": [0.0] * len(s2_ranges)}
    s2_history = [{"key": "W", "time": 4.5}, {"key": "W", "time": 2.0}, {"key": "L", "time": 1.0}]
    plan2 = run_test_scenario("SCENARIO 2", s2_lidar_data, s2_history)

    # Pause between scenarios
    time.sleep(2)

    # --- SCENARIO 3: ---
    s3_ranges = [2.20574951171875, 1.4095414876937866, 1.3273670673370361, 1.2948551177978516, 1.2711859941482544, 1.2294425964355469, 1.2056020498275757, 1.2030586004257202, 1.1688708066940308, 1.1443727016448975, 1.1277320384979248, 1.1297388076782227, 1.118085265159607, 1.0922765731811523, 1.11310613155365, 1.0943528413772583, 1.1065142154693604, 1.0969417095184326, 1.0879393815994263, 1.0909497737884521, 1.0920541286468506, 1.093017339706421, 1.1014295816421509, 1.0976516008377075, 1.108376383781433, 1.0992553234100342, 1.110076665878296, 1.1072256565093994, 1.1272878646850586, 1.1326359510421753, 1.1562987565994263, 1.1649025678634644, 1.1864675283432007, 1.1831382513046265, 1.229049563407898, 1.253312110900879, 1.286332368850708, 1.3113378286361694, 1.3726457357406616, 2.363633871078491, 2.326310873031616, 2.267001152038574, 2.2539758682250977, 2.2026703357696533, 2.1970343589782715, 2.1382639408111572, 2.118281602859497, 2.100414514541626, 2.0715997219085693, 2.0530991554260254, 2.0353550910949707, 2.0061094760894775, 1.9921302795410156, 1.967328429222107, 1.9387823343276978, 1.907867670059204, 1.9310598373413086, 1.8870747089385986, 1.8704673051834106, 1.8822753429412842, 1.8493965864181519, 1.8603066205978394, 1.8252081871032715, 1.8074755668640137, 1.8102082014083862, 1.8055086135864258, 0.9922045469284058, 0.9347611665725708, 0.8948846459388733, 0.8543595671653748, 0.8324671983718872, 0.8173275589942932, 0.7722718715667725, 0.7809544801712036, 0.7746545076370239, 0.7556554675102234, 0.7650203704833984, 0.7577167749404907, 0.7435964345932007, 0.7292069792747498, 0.7227778434753418, 0.7038238644599915, 0.7226575016975403, 0.703561007976532, 0.6973207592964172, 0.6867748498916626, 0.6884891390800476, 0.7035629749298096, 0.6855905055999756, 0.704741895198822, 0.6962265372276306, 0.6871312856674194, 0.6713651418685913, 0.6917924880981445, 0.6756938695907593, 0.6747021079063416, 0.6718466877937317, 0.6998618245124817, 0.6994832158088684, 0.6929818391799927, 0.6934897303581238, 0.7319599986076355, 0.7096303105354309, 0.6894886493682861, 0.7253106236457825, 0.7305090427398682, 0.7379233837127686, 0.7608370184898376, 0.7826849818229675, 0.7772102952003479, 0.7929438352584839, 0.7907309532165527, 0.8274410367012024, 0.836834192276001, 0.8656153678894043, 0.8746148943901062, 0.9160717725753784, 0.9918093681335449, 1.9598782062530518, 1.988598346710205, 1.9947400093078613, 2.0310778617858887, 2.050420045852661, 2.0770974159240723, 2.1018104553222656, 2.126309394836426, 2.1533195972442627, 2.1906752586364746, 2.212428092956543, 2.261150360107422, 2.288010835647583, 2.3306379318237305, 2.3572402000427246, 2.4061551094055176, 2.4588077068328857, 2.4801907539367676, 2.537809133529663, 2.570875644683838, 1.2320407629013062, 1.155641794204712, 1.1178321838378906, 1.059234380722046, 1.0555399656295776, 1.0369882583618164, 1.036673903465271, 1.0139529705047607, 1.0011643171310425, 0.9739624857902527, 0.9519551396369934, 0.9866943359375, 0.9571254253387451, 0.9368699193000793, 0.9401341676712036, 0.9198553562164307, 0.9255536198616028, 0.9188011288642883, 0.9286786317825317, 0.9328145980834961, 0.9102052450180054, 0.9249775409698486, 0.9311931729316711, 0.9209800362586975, 0.9301393032073975, 0.9156830310821533, 0.9277748465538025, 0.933191180229187, 0.9551464319229126, 0.9438261985778809, 0.9391844868659973, 0.9516076445579529, 0.9658786058425903, 0.9643028378486633, 0.993638277053833, 1.0071914196014404, 1.021275281906128, 1.0439040660858154, 1.0587807893753052, 1.0971121788024902, 1.1097979545593262, 1.160307765007019, 1.228737473487854, 10.377248764038086, 10.40913200378418, 10.391453742980957, 10.408234596252441, 7.951347351074219, 7.847879886627197, 7.69498348236084, 5.3158979415893555, 5.255383014678955, 5.369704723358154, 5.499242782592773, 5.646168231964111, 5.785773754119873, 5.966243743896484, 6.12092399597168, 6.305451393127441, 6.513454914093018, 1.151889443397522, 1.0828627347946167, 1.0449453592300415, 1.0222030878067017, 1.0020917654037476, 0.9787576794624329, 0.9706680178642273, 0.9561105370521545, 0.9427474141120911, 0.9249534010887146, 0.8976015448570251, 0.9036237597465515, 0.9137958288192749, 0.8820310831069946, 0.8757052421569824, 0.8822963833808899, 0.8507225513458252, 0.8709815740585327, 0.862400472164154, 0.8557053208351135, 0.868691086769104, 0.8542594909667969, 0.8514704704284668, 0.8510107398033142, 0.8701184391975403, 0.8710494041442871, 0.8591989874839783, 0.8675935864448547, 0.8742278814315796, 0.8633942008018494, 0.8643369674682617, 0.9057406187057495, 0.905053436756134, 0.9120209217071533, 0.9051809906959534, 0.9290739297866821, 0.9301489591598511, 0.9614032506942749, 0.9617556929588318, 1.0016465187072754, 1.0049315690994263, 1.030908226966858, 1.070346474647522, 1.1141035556793213, 1.195180892944336, 1.7357982397079468, 1.7064181566238403, 1.7062695026397705, 1.6919808387756348, 1.6763293743133545, 1.67552649974823, 1.6605373620986938, 1.6467641592025757, 1.2784124612808228, 1.2545167207717896, 1.2909115552902222, 1.2527211904525757, 1.2472261190414429, 1.2428019046783447, 1.244238018989563, 1.2314773797988892, 1.234764575958252, 1.231459617614746, 1.2107421159744263, 1.2145060300827026, 1.1861988306045532, 1.2093909978866577, 1.1987107992172241, 1.2026457786560059, 1.1926285028457642, 1.196929931640625, 1.1657387018203735, 1.1868107318878174, 1.18647038936615, 1.2022373676300049, 1.19022536277771, 1.189906358718872, 1.5250812768936157, 1.5259488821029663, 1.5299943685531616, 1.5341590642929077, 1.5426857471466064, 1.5349477529525757, 1.5354255437850952, 1.5382951498031616, 1.5384271144866943, 1.5320547819137573, 1.5399136543273926, 1.5528827905654907, 1.5519001483917236, 1.5636762380599976, 1.556064248085022, 1.591403841972351, 1.5746490955352783, 1.5870873928070068, 1.6026297807693481, 1.5950613021850586, 1.627703309059143, 1.6229901313781738, 1.6399059295654297, 1.6320624351501465, 1.6615594625473022, 1.6858173608779907, 1.6962482929229736, 1.7040011882781982, 1.7164474725723267, 1.0953422784805298, 1.0436664819717407, 1.0172547101974487, 0.9636416435241699, 0.9366146922111511, 0.9266681671142578, 0.9232227802276611, 0.9205859303474426, 0.8922688364982605, 0.8976491093635559, 0.874441385269165, 0.8702762126922607, 0.8774358630180359, 0.8587665557861328, 0.8314017057418823, 0.8411913514137268, 0.8232961297035217, 0.831426739692688, 0.8303762078285217, 0.8154270648956299, 0.8202332854270935, 0.8391738533973694, 0.8056779503822327, 0.8287394046783447, 0.813962459564209, 0.8340588212013245, 0.8237528800964355, 0.8343762159347534, 0.8295736312866211, 0.8368011116981506, 0.8281303644180298, 0.8660386800765991, 0.8550058603286743, 0.8447912335395813, 0.8662981986999512, 0.8637785911560059, 0.8957123756408691, 0.8885390162467957, 0.9146639108657837, 0.9399097561836243, 0.937160313129425, 0.9662970304489136, 0.981660008430481, 1.0215668678283691, 1.0533907413482666, 1.1232693195343018, 2.279017686843872, 2.258195400238037, 2.237884044647217, 2.228893518447876, 2.2096943855285645, 2.241098165512085, 2.2120964527130127, 2.209658622741699, 2.2111120223999023, 2.1870577335357666]
    s3_lidar_data = {
        "header": {"seq": 5, "stamp": {"secs": 110, "nsecs": 0}, "frame_id": "laser"},
        "angle_min": -3.0, "angle_max": 3.0, "angle_increment": 0.0167, "time_increment": 0.0,
        "scan_time": 0.0, "range_min": 0.1, "range_max": 30.0, "ranges": s3_ranges,
        "intensities": [0.0] * len(s3_ranges)}
    s3_history = [{"key": "L", "time": 4.5}, {"key": "L", "time": 2.0}, {"key": "L", "time": 1.0}]
    plan3 = run_test_scenario("SCENARIO 3", s3_lidar_data, s3_history)

    # Pause between scenarios
    time.sleep(2)

    # --- SCENARIO 4: ---
    s4_ranges = [3.7305850982666016, 3.7506675720214844, 3.7583250999450684, 3.7486844062805176, 3.754804849624634, 3.786698341369629, 3.7944769859313965, 3.7987060546875, 3.8166205883026123, 3.8467037677764893, 3.8744492530822754, 3.8760435581207275, 3.907874345779419, 3.9416720867156982, 3.951265335083008, 4.0040154457092285, 4.0054802894592285, 4.0390625, 4.05601692199707, 4.100495338439941, 4.128300666809082, 4.183711528778076, 4.213696479797363, 4.262510776519775, 4.2880859375, 4.34401273727417, 4.387001037597656, 4.372766017913818, 4.270262241363525, 4.154354572296143, 4.064310073852539, 3.9789879322052, 3.8852028846740723, 3.806591749191284, 3.7433645725250244, 3.6804940700531006, 3.607330322265625, 3.5426502227783203, 3.4506723880767822, 3.4157800674438477, 3.3619625568389893, 3.307598829269409, 3.2497546672821045, 3.226447343826294, 3.1598167419433594, 3.1117074489593506, 3.0776984691619873, 3.0485594272613525, 2.9904837608337402, 2.957805871963501, 2.9246866703033447, 2.9039957523345947, 2.8615100383758545, 2.850234270095825, 2.8076670169830322, 2.775017738342285, 2.7638566493988037, 2.7345638275146484, 2.7013885974884033, 2.6844589710235596, 2.658923864364624, 2.6218090057373047, 2.6170547008514404, 2.5904858112335205, 2.591381549835205, 2.576051950454712, 2.5424745082855225, 2.5388340950012207, 2.5236849784851074, 2.510049343109131, 2.505913496017456, 2.4964921474456787, 2.4899940490722656, 2.477438449859619, 2.462623357772827, 2.470360517501831, 2.4348645210266113, 2.435020923614502, 2.438420534133911, 2.412257671356201, 2.406881809234619, 2.4210588932037354, 2.4215030670166016, 2.422122001647949, 2.4431605339050293, 2.4162585735321045, 2.4111015796661377, 2.4151105880737305, 2.4158987998962402, 2.4268856048583984, 2.4237802028656006, 2.4227328300476074, 2.449718713760376, 2.4531102180480957, 2.44677472114563, 2.4369468688964844, 2.439404010772705, 2.4479894638061523, 2.4700560569763184, 2.4724836349487305, 2.4920191764831543, 2.491326332092285, 2.501633882522583, 2.505805730819702, 2.5165750980377197, 2.5376992225646973, 2.559513568878174, 2.5757274627685547, 2.5857577323913574, 2.5804762840270996, 2.580420970916748, 2.484299421310425, 2.4049601554870605, 2.3134984970092773, 2.2425453662872314, 2.152696132659912, 2.1166374683380127, 2.050693988800049, 1.9817148447036743, 1.9264590740203857, 1.867277979850769, 1.832112193107605, 1.7785688638687134, 1.7251566648483276, 1.706668734550476, 1.6529061794281006, 1.6151340007781982, 1.597565770149231, 1.5485608577728271, 1.525538682937622, 1.5172892808914185, 1.4934453964233398, 1.506203055381775, 1.5111947059631348, 1.5384160280227661, 1.5578562021255493, 1.601182222366333, 1.6254597902297974, 1.645652174949646, 1.689480185508728, 1.7207319736480713, 1.7426279783248901, 1.8031933307647705, 1.8281975984573364, 1.8778077363967896, 1.9443410634994507, 1.983798861503601, 2.042170763015747, 2.080334424972534, 2.1475439071655273, 2.2240805625915527, 0.1041673794388771, 0.11597103625535965, 0.11852288991212845, 0.11164222657680511, 0.13077180087566376, 0.14137884974479675, 0.11768356710672379, 0.13216227293014526, 0.12354762852191925, 0.14640909433364868, 0.14812594652175903, 0.16708572208881378, 0.17730380594730377, 0.157007098197937, 0.18006742000579834, 0.18982760608196259, 0.19709499180316925, 0.1945796012878418, 0.19380657374858856, 0.20662790536880493, 0.19418781995773315, 0.18999001383781433, 0.18408018350601196, 0.19518066942691803, 0.1935231238603592, 0.17448115348815918, 0.1794084757566452, 0.1864549219608307, 0.1712477207183838, 0.17050006985664368, 0.18678627908229828, 0.18547943234443665, 0.19280771911144257, 0.17701804637908936, 0.1956833004951477, 0.1756034791469574, 0.21045619249343872, 4.136129856109619, 4.227323532104492, 4.344803810119629, 4.439558029174805, 4.533984661102295, 4.679715633392334, 4.778636932373047, 4.908695220947266, 5.070069313049316, 1.5541437864303589, 1.4592920541763306, 1.4089962244033813, 1.3197065591812134, 1.2633923292160034, 1.188154697418213, 1.159849762916565, 1.1154028177261353, 1.1066973209381104, 1.127505898475647, 1.1126856803894043, 1.1512173414230347, 1.1396981477737427, 1.1564995050430298, 1.157792568206787, 1.194175124168396, 1.1907669305801392, 1.1881288290023804, 1.2162271738052368, 1.2280561923980713, 1.2459558248519897, 1.2644649744033813, 1.2688565254211426, 1.271406650543213, 1.2399165630340576, 1.224562168121338, 1.2011735439300537, 1.1818956136703491, 1.1568517684936523, 1.1386158466339111, 1.0998685359954834, 1.0867116451263428, 1.075261116027832, 1.0693484544754028, 1.0325361490249634, 1.0363867282867432, 1.0065211057662964, 1.003158688545227, 0.9778558015823364, 0.9790511131286621, 0.9756916165351868, 0.9560394883155823, 0.9293889403343201, 0.9180200099945068, 0.9182001948356628, 0.9147691130638123, 0.9285228848457336, 0.9100890159606934, 0.8785912990570068, 0.8909305334091187, 0.8666332364082336, 0.8732911944389343, 0.8565285205841064, 0.842555820941925, 0.8502947688102722, 0.8440417647361755, 0.82989501953125, 0.8221969604492188, 0.8328807950019836, 0.8273783326148987, 0.8125355839729309, 0.8123881816864014, 0.8213163018226624, 0.8218802809715271, 0.8036056160926819, 0.8034478425979614, 0.7989449501037598, 0.7781803607940674, 0.7938148975372314, 0.7947823405265808, 0.7920024394989014, 0.7984768152236938, 0.7870485186576843, 0.7827830910682678, 0.7923577427864075, 0.7667065262794495, 0.7887881398200989, 0.7952123880386353, 0.8016348481178284, 0.7677111625671387, 0.7914750576019287, 0.7902335524559021, 0.8026976585388184, 0.7820307612419128, 0.7956169247627258, 0.7802397012710571, 0.7806608080863953, 0.8081904649734497, 0.8089798092842102, 0.8245600461959839, 0.805083155632019, 0.814899206161499, 0.81365567445755, 0.81562739610672, 0.814731240272522, 0.826263964176178, 0.8081310391426086, 0.83079594373703, 0.8464320302009583, 0.8532687425613403, 0.8386616706848145, 0.8471553921699524, 0.8542166352272034, 0.8626723885536194, 0.8873712420463562, 0.8780672550201416, 0.8871452808380127, 0.8916163444519043, 0.9014478325843811, 0.9098689556121826, 0.9350123405456543, 0.9410861134529114, 0.9551058411598206, 0.9422085881233215, 0.9760409593582153, 0.9899349212646484, 0.9893410801887512, 0.9933592677116394, 1.0029600858688354, 1.0124576091766357, 1.0365031957626343, 1.066663146018982, 1.0834455490112305, 1.0917516946792603, 1.1015796661376953, 1.1496678590774536, 1.1262503862380981, 1.1668822765350342, 1.1935460567474365, 1.2247194051742554, 1.2479491233825684, 1.2637567520141602, 1.3081440925598145, 1.292544960975647, 1.2758686542510986, 1.2448192834854126, 1.254279613494873, 1.2472294569015503, 1.2163954973220825, 1.208539605140686, 1.1960114240646362, 1.1901482343673706, 1.176468849182129, 1.1544220447540283, 1.1432247161865234, 1.1482805013656616, 1.1321989297866821, 1.1567895412445068, 1.217934489250183, 1.2749882936477661, 1.341849446296692, 1.4134736061096191, 1.4846806526184082, 1.5588948726654053, 2.8155148029327393, 2.9960577487945557, 3.164332151412964, 3.4189889430999756, 3.6599016189575195, 3.770294666290283, 3.740337371826172, 3.7381248474121094, 3.722501277923584]
    s4_lidar_data = {
        "header": {"seq": 5, "stamp": {"secs": 110, "nsecs": 0}, "frame_id": "laser"},
        "angle_min": -3.0, "angle_max": 3.0, "angle_increment": 0.0167, "time_increment": 0.0,
        "scan_time": 0.0, "range_min": 0.1, "range_max": 30.0, "ranges": s4_ranges,
        "intensities": [0.0] * len(s4_ranges)}
    s4_history = [
        {"key": "W", "time": 4.5}, {"key": "L", "time": 4.5},
        {"key": "L", "time": 2.0}, {"key": "D", "time": 4.5},
        {"key": "A", "time": 1.0}, {"key": "A", "time": 1.0}]
    plan4 = run_test_scenario("SCENARIO 4", s4_lidar_data, s4_history)

    print("\n--- ALL SCENARIOS COMPLETE ---")